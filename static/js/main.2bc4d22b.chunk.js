(this["webpackJsonpcrypto-tracker"]=this["webpackJsonpcrypto-tracker"]||[]).push([[0],{22:function(t,e,c){t.exports={title:"ChartOverlay_title__2fAoP",dropdown:"ChartOverlay_dropdown__38Pte",list:"ChartOverlay_list__2mEDM",picked:"ChartOverlay_picked__3kZCL",toolbar:"ChartOverlay_toolbar__1ZuXi",interval:"ChartOverlay_interval__3JFKe"}},24:function(t,e,c){t.exports={container:"Card_container__1eXQX",grabbable:"Card_grabbable__21ony",toolbox:"Card_toolbox__kpSTg",settings:"Card_settings__3vwDM","close-button":"Card_close-button__1BVAL"}},30:function(t,e,c){t.exports={toolbar:"App_toolbar__1q8Ru",utility:"App_utility__E1T-N",dropdown:"App_dropdown__2o4xY",button:"App_button__niw2Q"}},34:function(t,e,c){t.exports={"list-item":"CryptoListItem_list-item__1fKkl",label:"CryptoListItem_label__OWyTf",checkmark:"CryptoListItem_checkmark__20Acz"}},35:function(t,e,c){t.exports={container:"AddCrypto_container__2-eCR",header:"AddCrypto_header__2yg4A",button:"AddCrypto_button__1EaVo",close:"AddCrypto_close__X7KzG","close-button":"AddCrypto_close-button__1zYDL"}},40:function(t,e,c){t.exports={container:"MarketData_container__3NEGI",name:"MarketData_name__3WgY8"}},41:function(t,e,c){t.exports={backdrop:"ChartModal_backdrop__2A5Tq",modal:"ChartModal_modal__2BqGD","slide-down":"ChartModal_slide-down__2LTPk"}},43:function(t,e,c){t.exports={backdrop:"AddModal_backdrop__22E4K",modal:"AddModal_modal__3A7k1","slide-down":"AddModal_slide-down__1-lIS"}},50:function(t,e,c){t.exports={"chart-summary":"HistoryChart_chart-summary__2OcYI","chart-detail":"HistoryChart_chart-detail__1zkLs"}},51:function(t,e,c){t.exports={"chart-summary":"OhlcChart_chart-summary__1fdzl","chart-detail":"OhlcChart_chart-detail__3IwYl"}},54:function(t,e,c){t.exports={section:"Container_section__YYafB"}},56:function(t,e,c){t.exports={button:"Button_button__1mESR"}},57:function(t,e,c){t.exports={"lds-roller":"Loader_lds-roller__2jVTB"}},58:function(t,e,c){t.exports={error:"ErrorUI_error__1iZil"}},59:function(t,e,c){t.exports={list:"CryptoList_list__3WK0t"}},72:function(t,e,c){},77:function(t,e,c){"use strict";c.r(e);var n=c(19),r=c.n(n),a=c(29),i=(c(72),function(){return Object(a.b)()}),o=a.c,s=["usd","eur","gbp","rub","jpy","aud","chf"],l=["7","14","30","90","180","365","max"],d=c(7),u=c(2),j=c(83),p=c(84),b=c(39),h=c.n(b),f=c(49),O=function(){var t=Object(u.useState)(!1),e=Object(d.a)(t,2),c=e[0],n=e[1],r=Object(u.useState)(null),a=Object(d.a)(r,2),i=a[0],o=a[1],s=Object(u.useCallback)(function(){var t=Object(f.a)(h.a.mark((function t(e,c){var r,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(!0),t.prev=1,t.next=4,fetch(e.url);case 4:if((r=t.sent).ok){t.next=7;break}throw new Error("Request failed! Please try again!");case 7:return t.next=9,r.json();case 9:a=t.sent,c(a),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),o(t.t0.message||"Something went wrong!");case 16:n(!1);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,c){return t.apply(this,arguments)}}(),[]);return{isLoading:c,error:i,fetchData:s}},m=function(t){var e=Math.floor((t/10).toFixed(0).toString().length),c=e%3;return(Math.abs(Number(t))/Number("1.0e+"+(e-c))).toFixed(2)+["M","B","T","Q"][Math.floor(e/3)-2]},y=c(40),x=c.n(y),_=c(1),v=function(t){var e=t.id,c=o((function(t){return t.fiat.fiatCurrency})),n=Object(u.useState)(),r=Object(d.a)(n,2),a=r[0],i=r[1],s=Object(u.useState)({change24h:"",changePerc24h:""}),l=Object(d.a)(s,2),j=l[0],p=l[1],b=O().fetchData;return Object(u.useEffect)((function(){b({url:"https://api.coingecko.com/api/v3/coins/markets?vs_currency=".concat(c,"&ids=").concat(e,"&order=market_cap_desc&per_page=1&page=1&sparkline=false")},(function(t){var e=Object(d.a)(t,1)[0],c=e.id,n=e.name,r=e.image,a=e.current_price,o=e.price_change_24h,s=e.price_change_percentage_24h,l={id:c,name:n,image:r,price:a,change24h:o,changePerc24h:s,marketCap:e.market_cap,circulatingSupply:e.circulating_supply,totalVolume:e.total_volume};l.marketCap=m(+l.marketCap),l.price=(+l.price).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),l.circulatingSupply=m(+l.circulatingSupply),l.totalVolume=m(+l.totalVolume),i(l);var u="rgb(110, 255, 174)",j="rgb(241, 43, 66)";p({change24h:o>0?u:j,changePerc24h:s>0?u:j})}))}),[e,c,b]),Object(_.jsxs)("div",{className:x.a.container,children:[Object(_.jsxs)("div",{className:x.a.name,children:[Object(_.jsx)("img",{src:null===a||void 0===a?void 0:a.image,alt:"".concat(null===a||void 0===a?void 0:a.name," logo")}),Object(_.jsx)("p",{children:null===a||void 0===a?void 0:a.name})]}),Object(_.jsxs)("p",{children:["Price: ",Object(_.jsx)("span",{children:null===a||void 0===a?void 0:a.price})]}),Object(_.jsxs)("p",{children:["Change:"," ",Object(_.jsx)("span",{style:{color:j.change24h},children:null===a||void 0===a?void 0:a.change24h.toFixed(2)})]}),Object(_.jsxs)("p",{children:["%Change:"," ",Object(_.jsxs)("span",{style:{color:j.changePerc24h},children:[null===a||void 0===a?void 0:a.changePerc24h.toFixed(2),"%"]})]}),Object(_.jsxs)("p",{children:["Market Cap: ",Object(_.jsx)("span",{children:null===a||void 0===a?void 0:a.marketCap})]}),Object(_.jsxs)("p",{children:["Circulating Supply: ",Object(_.jsx)("span",{children:null===a||void 0===a?void 0:a.circulatingSupply})]}),Object(_.jsxs)("p",{children:["Total Volume: ",Object(_.jsx)("span",{children:null===a||void 0===a?void 0:a.totalVolume})]})]})},C=c(24),g=c.n(C),k=c(6),N=c(12),S=c(50),w=c.n(S),A=c(10);A.b.register.apply(A.b,Object(N.a)(A.f));var M=function(t){var e=t.id,c=t.cssClass,n=Object(u.useRef)(null),r=Object(u.useState)([]),a=Object(d.a)(r,2),i=a[0],s=a[1],l=Object(u.useState)([]),j=Object(d.a)(l,2),p=j[0],b=j[1],h=O().fetchData,f=o((function(t){return t.fiat.fiatCurrency})),m=o((function(t){return t.crypto.cryptocurrencies.filter((function(t){return t.id===e}))})),y=Object(d.a)(m,1)[0].historyChart.options,x=y.interval,v=y.type,C=Object(u.useCallback)((function(t){return{labels:p,datasets:[{label:"Price",data:t,backgroundColor:"rgba(140, 63, 79, 0.2)",borderColor:"rgba(140, 63, 79, 1)",fill:!0}]}}),[p]),g=Object(u.useCallback)((function(t){if(t){var e=t.getContext("2d");e&&(n.current=new A.b(e,{type:v,data:C(i),options:{maintainAspectRatio:!1,scales:{x:{type:"timeseries",time:{minUnit:"day"},ticks:{maxRotation:0,minRotation:0},grid:{display:!1}},y:{grid:{display:!1}}},plugins:{legend:{display:!1},title:{display:!0,text:"History Chart"}}}}))}}),[]);return Object(u.useEffect)((function(){h({url:"https://api.coingecko.com/api/v3/coins/".concat(e,"/market_chart?vs_currency=").concat(f,"&days=").concat(x,"&interval=daily")},(function(t){var e,c=[],n=[],r=Object(k.a)(t.prices);try{for(r.s();!(e=r.n()).done;){var a=e.value,i=Object(d.a)(a,2),o=i[0],l=i[1];c.push(+l.toFixed(2)),n.push(o)}}catch(u){r.e(u)}finally{r.f()}c.pop(),n.pop(),s(c),b(n)}))}),[e,f,h,x]),Object(u.useEffect)((function(){n.current&&(n.current.data=C(i),n.current.data.labels=p,n.current.update())}),[i,p,C]),Object(_.jsx)("div",{className:w.a["chart-".concat(c)],children:Object(_.jsx)("canvas",{ref:g,id:"history-chart-".concat(e)})})},D=c(51),I=c.n(D),E=c(45);c(75);A.b.register(E.b,E.a),A.b.register.apply(A.b,Object(N.a)(A.f));var P=function(t){var e=t.id,c=t.cssClass,n=Object(u.useRef)(null),r=Object(u.useState)([]),a=Object(d.a)(r,2),i=a[0],s=a[1],l=O().fetchData,j=o((function(t){return t.fiat.fiatCurrency})),p=o((function(t){return t.crypto.cryptocurrencies.filter((function(t){return t.id===e}))})),b=Object(d.a)(p,1)[0].ohlcChart.options.interval,h=function(t){return{datasets:[{label:"# of Votes",data:t}]}},f=Object(u.useCallback)((function(t){if(t){var e=t.getContext("2d");e&&(n.current=new A.b(e,{type:"candlestick",data:h(i),options:{maintainAspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{maxRotation:0,minRotation:0}},y:{grid:{display:!1}}},plugins:{legend:{display:!1},title:{display:!0,text:"OHLC Chart"}}}}))}}),[]);return Object(u.useEffect)((function(){l({url:"https://api.coingecko.com/api/v3/coins/".concat(e,"/ohlc?vs_currency=").concat(j,"&days=").concat(b)},(function(t){for(var e=[],c=0;c<t.length;c+=6){var n=Object(d.a)(t[c],5),r=n[0],a=n[1],i=n[2],o=n[3],l=n[4];e.push({x:r,o:a,h:i,l:o,c:l})}s(e)}))}),[e,j,b,l]),Object(u.useEffect)((function(){n.current&&(n.current.data=h(i),n.current.update())}),[i]),Object(_.jsx)("div",{className:I.a["chart-".concat(c)],children:Object(_.jsx)("canvas",{ref:f,id:"ohlc-chart-".concat(e)})})},T="card",F=c(20),H=c(52),L=c.n(H),R=Object(F.b)({name:"crypto",initialState:{cryptocurrencies:[]},reducers:{updateCrypto:function(t,e){for(var c=t.cryptocurrencies,n=e.payload,r=L()(c),a=function(t){var e=n.findIndex((function(e){return e.id===r[t].id}));-1!==e?n.splice(e,1):(c.splice(t,1),t--),i=t},i=0;i<c.length;i++)a(i);n.forEach((function(t){return c.push(t)}))},setCrypto:function(t,e){t.cryptocurrencies=e.payload},updateDays:function(t,e){var c=t.cryptocurrencies,n=e.payload,r=n.id,a=n.interval,i=n.chartName,o=c.findIndex((function(t){return t.id===r})),s=c[o],l=s.historyChart,d=s.ohlcChart;"HistoryChart"===i?l.options.interval=a:d.options.interval=a},updateChartType:function(t,e){var c=t.cryptocurrencies,n=e.payload,r=n.id,a=n.chartType,i=c.findIndex((function(t){return t.id===r}));c[i].historyChart.options.type=a}}}),B=R.actions,V=R.reducer,Y=Object(F.b)({name:"detail",initialState:{selectedChart:"HistoryChart"},reducers:{setDetail:function(t,e){t.selectedChart=e.payload}}}),z=Y.actions,K=Y.reducer,q=c(41),W=c.n(q),X=c(22),G=c.n(X),J=function(t){var e=t.id,c=o((function(t){return t.selected.selectedChart})),n=i(),r=Object(u.useState)(c),a=Object(d.a)(r,2),s=a[0],j=a[1],p=o((function(t){return t.crypto.cryptocurrencies.filter((function(t){return t.id===e}))})),b=Object(d.a)(p,1)[0],h=b.historyChart,f=b.ohlcChart,O="HistoryChart"===s?h.options.interval:f.options.interval,m=function(t){n(B.updateDays({interval:t,id:e,chartName:s}))};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h2",{className:G.a.title,children:e}),Object(_.jsxs)("div",{className:G.a.toolbar,children:[Object(_.jsxs)("select",{className:G.a.dropdown,value:s,onChange:function(t){j(t.currentTarget.value)},children:[Object(_.jsx)("option",{value:"HistoryChart",children:"History Chart"}),Object(_.jsx)("option",{value:"OhlcChart",children:"Ohlc Chart"})]}),Object(_.jsx)("p",{className:G.a.interval,children:"Interval:"}),Object(_.jsx)("ul",{className:G.a.list,children:l.map((function(t){return Object(_.jsx)("li",{value:t,className:O===t?G.a.picked:"",onClick:m.bind(null,t),children:t},t)}))})]}),"HistoryChart"===s&&Object(_.jsx)(M,{id:e,cssClass:"detail"}),"OhlcChart"===s&&Object(_.jsx)(P,{id:e,cssClass:"detail"})]})},Q=function(t){return Object(_.jsx)("div",{className:W.a.backdrop,onClick:t.onClose})},Z=function(t){return Object(_.jsx)("div",{className:W.a.modal,children:Object(_.jsx)(J,{id:t.id})})},U=document.getElementById("overlays"),$=function(t){var e=t.id,c=t.onClose;return Object(_.jsxs)(_.Fragment,{children:[r.a.createPortal(Object(_.jsx)(Q,{onClose:c}),U),r.a.createPortal(Object(_.jsx)(Z,{id:e}),U)]})},tt=Object(u.memo)((function(t){var e=t.id,c=t.moveCard,n=t.findCard,r=Object(u.useState)(!1),a=Object(d.a)(r,2),s=a[0],l=a[1],b=i(),h=o((function(t){return t.crypto.cryptocurrencies})),f=n(e).index,O=Object(j.a)((function(){return{type:T,item:{id:e,originalIndex:f},collect:function(t){return{isDragging:t.isDragging()}},end:function(t,e){var n=t.id,r=t.originalIndex;e.didDrop()||c(n,r)}}}),[e,f,c]),m=Object(d.a)(O,2),y=m[0].isDragging,x=m[1],C=Object(p.a)((function(){return{accept:T,canDrop:function(){return!1},hover:function(t){var r=t.id;if(r!==e){var a=n(e).index;c(r,a)}}}}),[n,c]),k=Object(d.a)(C,2)[1],N=y?0:1,S=function(){l((function(t){return!t}))};return Object(_.jsxs)("div",{className:"".concat(g.a.container," ").concat(g.a.grabbable),ref:function(t){return x(k(t))},style:{opacity:N},children:[Object(_.jsx)(v,{id:e}),Object(_.jsx)("div",{onClick:function(){S(),b(z.setDetail("HistoryChart"))},children:Object(_.jsx)(M,{id:e,cssClass:"summary"})}),Object(_.jsx)("div",{onClick:function(){S(),b(z.setDetail("OhlcChart"))},children:Object(_.jsx)(P,{id:e,cssClass:"summary"})}),Object(_.jsxs)("div",{className:g.a.toolbox,children:[Object(_.jsx)("div",{className:g.a.settings,onClick:S}),s&&Object(_.jsx)($,{id:e,onClose:S}),Object(_.jsx)("a",{href:"#",className:g.a["close-button"],onClick:function(t){b(B.setCrypto(h.filter((function(e){return e.id!==t}))))}.bind(null,e)})]})]})})),et=c(54),ct=c.n(et),nt=c(55),rt=c.n(nt),at=Object(u.memo)((function(){var t=o((function(t){return t.crypto.cryptocurrencies})),e=i(),c=Object(p.a)((function(){return{accept:T}})),n=Object(d.a)(c,2)[1],r=Object(u.useCallback)((function(e){var c=t.filter((function(t){return"".concat(t.id)===e})),n=Object(d.a)(c,1)[0];return{card:n,index:t.indexOf(n)}}),[t]),a=Object(u.useCallback)((function(c,n){var a=r(c),i=a.card,o=a.index,s=rt()(t,{$splice:[[o,1],[n,0,i]]});e(B.setCrypto(s))}),[r,e,t]);return Object(_.jsx)("div",{className:ct.a.section,ref:n,children:t.map((function(t){return Object(_.jsx)(tt,{id:t.id,moveCard:a,findCard:r},t.id)}))})})),it=Object(F.b)({name:"modal",initialState:{addModalIsShown:!0},reducers:{toggleAddModal:function(t){t.addModalIsShown=!t.addModalIsShown}}}),ot=it.actions,st=it.reducer,lt=c(56),dt=c.n(lt),ut=function(t){return Object(_.jsx)("button",{className:"".concat(dt.a.button," ").concat(t.cssClass),onClick:t.onClick,children:t.children})},jt=c(34),pt=c.n(jt),bt=function(t){var e=t.id,c=t.name,n=t.image,r=t.onChange,a=t.isChecked;return Object(_.jsx)("li",{className:pt.a["list-item"],children:Object(_.jsxs)("label",{className:pt.a.label,children:[Object(_.jsx)("input",{type:"checkbox",id:e,onChange:r.bind(null,e),defaultChecked:a}),Object(_.jsx)("span",{className:pt.a.checkmark}),Object(_.jsx)("img",{src:n,alt:"".concat(c," logo")}),Object(_.jsx)("p",{children:c})]})})},ht=c(57),ft=c.n(ht),Ot=function(){return Object(_.jsxs)("div",{className:ft.a["lds-roller"],children:[Object(_.jsx)("div",{}),Object(_.jsx)("div",{}),Object(_.jsx)("div",{}),Object(_.jsx)("div",{}),Object(_.jsx)("div",{}),Object(_.jsx)("div",{}),Object(_.jsx)("div",{}),Object(_.jsx)("div",{})]})},mt=c(58),yt=c.n(mt),xt=function(t){return Object(_.jsx)("section",{className:yt.a.error,children:Object(_.jsx)("p",{children:t.message})})},_t=c(59),vt=c.n(_t),Ct=function(t){var e=t.pagination,c=t.onCheckedCryptos,n=o((function(t){return t.crypto.cryptocurrencies})),r=Object(u.useState)([]),a=Object(d.a)(r,2),i=a[0],s=a[1],l=O(),j=l.isLoading,p=l.error,b=l.fetchData,h=function(t){c((function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat(Object(N.a)(e),[t])}))};return Object(u.useEffect)((function(){b({url:"https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=20&page=".concat(e,"&sparkline=false")},(function(t){var e=t.map((function(t){return{id:t.id,name:t.name,image:t.image}}));s((function(t){return t.concat(e)}))}))}),[e,b]),p?Object(_.jsx)(xt,{message:p}):Object(_.jsxs)("ul",{className:vt.a.list,children:[i.map((function(t){return Object(_.jsx)(bt,{id:t.id,name:t.name,image:t.image,isChecked:n.map((function(t){return t.id})).includes(t.id),onChange:h},t.id)})),j&&Object(_.jsx)(Ot,{})]})},gt=c(35),kt=c.n(gt),Nt=function(){var t=i(),e=o((function(t){return t.crypto.cryptocurrencies})),c=Object(u.useState)(1),n=Object(d.a)(c,2),r=n[0],a=n[1],s=Object(u.useState)(e.map((function(t){return t.id}))),l=Object(d.a)(s,2),j=l[0],p=l[1];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:kt.a.container,onScroll:function(t){var e=t.currentTarget;e.scrollHeight-e.scrollTop===e.clientHeight&&a((function(t){return t+1}))},children:[Object(_.jsxs)("div",{className:kt.a.header,children:[Object(_.jsx)("h2",{children:"Add a cryptocurrency"}),Object(_.jsx)("p",{children:"Add a cryptocurrencies you would like to track. We'll add it to your personalized tab. You can always sort them as you like with drag and drop."})]}),Object(_.jsx)(Ct,{pagination:r,onCheckedCryptos:p})]}),Object(_.jsx)(ut,{onClick:function(){t(B.updateCrypto(j.map((function(t){return{id:t,historyChart:{options:{interval:"14",type:"line"}},ohlcChart:{options:{interval:"14"}}}})))),t(ot.toggleAddModal())},cssClass:kt.a.button,children:"Add a Cryptocurrency"})]})},St=c(43),wt=c.n(St),At=function(){var t=i();return Object(_.jsx)("div",{className:wt.a.backdrop,onClick:t.bind(null,ot.toggleAddModal())})},Mt=function(){return Object(_.jsx)("div",{className:wt.a.modal,children:Object(_.jsx)(Nt,{})})},Dt=document.getElementById("overlays"),It=function(){return Object(_.jsxs)(_.Fragment,{children:[r.a.createPortal(Object(_.jsx)(At,{}),Dt),r.a.createPortal(Object(_.jsx)(Mt,{}),Dt)]})},Et=c(82),Pt=c(60),Tt=Object(F.b)({name:"fiat",initialState:{fiatCurrency:"usd"},reducers:{setFiatCurrency:function(t,e){t.fiatCurrency=e.payload}}}),Ft=Tt.actions,Ht=Tt.reducer,Lt=c(30),Rt=c.n(Lt),Bt=function(){var t=o((function(t){return t})),e=t.crypto.cryptocurrencies,c=t.modal.addModalIsShown,n=i();return Object(_.jsxs)(Et.a,{backend:Pt.a,children:[c&&Object(_.jsx)(It,{}),Object(_.jsxs)("div",{className:Rt.a.toolbar,children:[Object(_.jsxs)("p",{children:["My cryptocurrencies(",e.length,")"]}),Object(_.jsxs)("div",{className:Rt.a.utility,children:[Object(_.jsx)("label",{children:Object(_.jsx)("select",{onChange:function(t){n(Ft.setFiatCurrency(t.currentTarget.value))},className:Rt.a.dropdown,children:s.map((function(t){return Object(_.jsx)("option",{children:t},t)}))})}),Object(_.jsx)("a",{className:Rt.a.button,onClick:function(){n(ot.toggleAddModal())},children:"+Add a cryptocurrency"})]})]}),Object(_.jsx)(at,{})]})},Vt=Object(F.a)({reducer:{crypto:V,fiat:Ht,modal:st,selected:K}});r.a.render(Object(_.jsx)(a.a,{store:Vt,children:Object(_.jsx)(Bt,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.2bc4d22b.chunk.js.map